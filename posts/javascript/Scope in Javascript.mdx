---
title: Scope in Javascript
description: javascript에서 쓰이는 스코프에 대해서 알아본다
tags:
  - javascript
createdAt: 2024-11-12
thumbnail: /thumbnails/186bb3a426750da3f.png
---
Javascript에서의 스코프에 대해서 알아보고자 합니다.

## Scope
그 전에, 우선 스코프란 무엇일까요? 스코프(scope)란 단어는 범위를 뜻합니다. Javascript에서 쓰이는 스코프의 범위란 변수에 접근할 수 있는 범위를 의미합니다.    
Javascript에서 쓰이는 Scope는 크게 3가지 유형의 Scope가 있습니다.
바로 `블록 스코프`, `함수 스코프`, `전역 스코프` 가 있습니다.

## 함수 스코프

기본적으로 Javascript는 함수 스코프를 사용합니다. 각 함수는 새로운 스코프를 만들고, 함수 내부에 정의된 변수는 함수 외부에서는 접근할 수 없습니다.    
다만 만약 변수가 함수 내부에 선언된 것이 아니라면, 변수의 스코프는 전역 스코프가 되어 어디서든 접근이 가능해 집니다.   
```javascript
function(){
	var value = 123;
}
console.log(value); // reference error
```

위 코드에서 처럼 함수 내부에 정의된 변수를 외부에서는 접근할 수 없습니다. 하지만 함수 스코프에서 스코프를 생성하는 것은 어디까지나 함수이기 때문에 함수가 아닌 곳에서 사용된 값들은 외부에서도 사용할 수 있게 됩니다. 
```javascript
if(true){
    var value = 123;
}
console.log(value); // 123

var temp = [];
for(var i = 0; i<5; i++){
	temp.push(function(){
		return i;
	});
}

console.log(i) // 5
temp.forEach(v=>{
	console.log(v()); // 5 5 5 5 5
})
```
위 코드와 같이 코드를 실행하면 이상한 결과를 얻게 됩니다.    
<br/>
우선 `value`는 분명 if 문으로 둘러 쌓여 있지만, 이는 함수가 아니기 때문에 전역으로 취급이 됩니다. 따라서 외부에서도 접근이 가능하고, `value`값이 정상적으로 출력됩니다.
<br/>
그 아래는 더욱 이상합니다. 마찬가지로 for 문이 종료되고, console에서 접근한 `i`값이 5인것은 이해가 되지만, `temp`에 push한 function의 return값이 5만 출력되는 것은 분명 이상해 보입니다.
<br/>
이는 **var**가 함수 스코프이기 때문에 발생한 문제로, 다음과 같은 순서로 i에 대해 탐색하고 있기 때문입니다.
```
v()가 실행된 함수 내부
-> console.log가 호출된 함수 내부
-> 전역 스코프
```
때문에 i는 모두 5가 출력되는 것입니다.
<br/>
이를 해결하기 위해서 우리는 temp에 push중인 함수를 IIFE로 만들 수도 있습니다만, 좀 더 좋은 방법이 있습니다. 바로 var로 선언된 i를 블록 스코프 변수로 만드는 것입니다.